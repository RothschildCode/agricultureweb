webpackJsonp([4],{132:function(module,exports,__webpack_require__){var Component=__webpack_require__(0)(__webpack_require__(202),null,null,null);module.exports=Component.exports},133:function(module,exports,__webpack_require__){var Component=__webpack_require__(0)(__webpack_require__(203),__webpack_require__(139),null,null);module.exports=Component.exports},139:function(module,exports){module.exports={render:function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",[_vm.data.list.length>0?_c("div",{staticClass:"list-block accordion-list"},[_c("ul",_vm._l(_vm.data.list,function(item,$index){return _c("li",{staticClass:"accordion-item",class:{selected:item.content_id==_vm.currentItem.content_id,"accordion-item-expanded":item.content_id==_vm.currentItem.content_id}},[_c("a",{staticClass:"item-content item-link",attrs:{href:"#"},on:{click:function($event){_vm.select(item)}}},[_c("div",{staticClass:"item-media"},[1==item.status?_c("i",{staticClass:"f7-icons",staticStyle:{color:"green"}},[_vm._v("check_round_fill")]):_vm._e()]),_vm._v(" "),_c("div",{staticClass:"item-inner"},[_c("div",{staticClass:"item-title",domProps:{innerHTML:_vm._s(item.content_title)}})])]),_vm._v(" "),_c("div",{staticClass:"accordion-item-content"},[_c("div",{staticClass:"content-block"},[1==item.content_type?_c("ul",_vm._l(item.opts,function(opt){return _c("li",[_c("label",{staticClass:"label-radio item-content"},[_c("input",{attrs:{type:"radio",name:"my-radio",disabled:item.filled},domProps:{checked:item.result_value==opt}}),_vm._v(" "),_c("div",{staticClass:"item-inner task-opt",class:{disabled:item.filled},on:{click:function($event){_vm.radioClick($index,opt)}}},[_c("div",{staticClass:"item-title",domProps:{innerHTML:_vm._s(opt)}})])])])})):_vm._e(),_vm._v(" "),2==item.content_type?_c("ul",[_c("li",[_c("div",{staticClass:"item-content"},[_c("div",{staticClass:"item-inner"},[_c("div",{staticClass:"item-input item-input-field"},[_c("textarea",{directives:[{name:"model",rawName:"v-model",value:item.result_value,expression:"item.result_value"}],attrs:{disabled:1==item.status,placeholder:"点击填写"},domProps:{value:item.result_value},on:{input:function($event){$event.target.composing||_vm.$set(item,"result_value",$event.target.value)}}})])])])])]):_vm._e(),_vm._v(" "),item.photograph_group?_c("multi-preview",{attrs:{data:item.photo_list,readonly:1==item.status,urls:item.photo_urls}}):_vm._e()],1)])])}))]):_vm._e()])},staticRenderFns:[]}},14:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/img/mescroll-empty.png"},149:function(module,exports){module.exports={render:function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{attrs:{id:"app"}},[_c("f7-views",[_c("f7-view",{attrs:{id:"main-view",main:""}},[_c("subnavbar",{attrs:{list:_vm.subnavbarItems,activeIndex:_vm.tabIndex,firstDefault:!1,widthAve:!0}}),_vm._v(" "),_c("f7-pages",[_c("div",{staticClass:"page task-page navbar-through",attrs:{"data-page":"task"}},[0==_vm.tabIndex?_c("a",{staticClass:"floating-button",attrs:{href:"#"},on:{click:function($event){_vm.done()}}},[_vm._v("提交")]):_vm._e(),_vm._v(" "),_c("div",{staticClass:"page-content"},[_c("div",{ref:"swiper",staticClass:"swiper-container"},[_c("div",{staticClass:"swiper-wrapper"},_vm._l(_vm.subnavbarItems,function(item,$index){return _c("div",{staticClass:"swiper-slide"},[_c("task-container",{ref:"taskWrap",refInFor:!0,attrs:{noDataTip:"您暂时没有接收到任何任务",refreshBtnLabel:"刷新任务列表",uplock:!0,uniqueKey:$index,initload:$index==_vm.tabIndex,status:item.status}})],1)}))])])])])],1)],1)],1)},staticRenderFns:[]}},16:function(module,exports,__webpack_require__){var Component=__webpack_require__(0)(__webpack_require__(29),__webpack_require__(18),null,null);module.exports=Component.exports},17:function(module,exports,__webpack_require__){var Component=__webpack_require__(0)(__webpack_require__(30),__webpack_require__(20),null,null);module.exports=Component.exports},18:function(module,exports){module.exports={render:function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"navbar"},[_c("div",{staticClass:"navbar-inner h-auto"},[_c("div",{ref:"scrollContent",staticClass:"subnavbar tabs-row"},[_c("div",{staticClass:"buttons-row"},[_vm.firstDefault?_c("a",{ref:0==_vm.activeIndex?"activeDom":"",staticClass:"button tab-link",class:{active:0==_vm.activeIndex},attrs:{href:"#"},on:{click:function($event){_vm.navClick(0)}}},[_vm._v("全部")]):_vm._e(),_vm._v(" "),_vm._l(_vm.list,function(item,$index){return _c("a",{ref:$index==_vm.activeIndex?"activeDom":"",refInFor:!0,staticClass:"button tab-link",class:{active:$index==_vm.activeIndex},style:_vm.itemStyle,attrs:{href:"#"},domProps:{innerHTML:_vm._s(item.cname)},on:{click:function($event){_vm.navClick($index)}}})}),_vm._v(" "),_vm.more?_c("a",{staticClass:"button tab-link more",on:{click:function($event){_vm.navClick(-1)}}},[_c("i",{staticClass:"f7-icons fontsize-2x"},[_vm._v("more")])]):_vm._e()],2)])])])},staticRenderFns:[]}},20:function(module,exports){module.exports={render:function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"mescroll",staticStyle:{height:"-webkit-fill-available",overflow:"scroll"},attrs:{id:_vm.ids.mescroll}},[_c("div",[_c("content-wrap",{ref:"contentWrap",attrs:{data:_vm.data,loaded:_vm.loaded}}),_vm._v(" "),_c("div",{attrs:{id:_vm.ids.emptyWrap}})],1)])},staticRenderFns:[]}},202:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__base_MeScrollContainer__=__webpack_require__(17),__WEBPACK_IMPORTED_MODULE_0__base_MeScrollContainer___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__base_MeScrollContainer__),__WEBPACK_IMPORTED_MODULE_1__TaskWrap__=__webpack_require__(133),__WEBPACK_IMPORTED_MODULE_1__TaskWrap___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__TaskWrap__);__webpack_exports__.default={extends:__WEBPACK_IMPORTED_MODULE_0__base_MeScrollContainer___default.a,props:["status"],data:function(){return{pageId:1,displayNumber:-1,loaded:!1}},created:function(){this.data={list:[],status:this.status}},methods:{dataHandler:function(list){this.ableCount=list.length;for(var i=0;i<list.length;i++){1==list[i].content_type&&(list[i].opts=list[i].content_value.split("/"));var aphotos=new Array,bfilled=!1;list[i].result_photos?(aphotos=list[i].result_photos.split(";"),(""!=aphotos[0]||list[i]&&""!=list[i])&&(bfilled=!0,this.ableCount-=1)):null!=list[i].result_value&&""!=list[i].result_value&&(bfilled=!0,this.ableCount-=1),list[i].content_id=list[i].content_id,list[i].user_id=1,list[i].result_value=list[i].result_value,list[i].result_photos=list[i].result_photos,list[i].photo_urls=aphotos,list[i].photo_list=[],list[i].filled=bfilled,list[i].status=list[i].status,list[i].content_type=list[i].content_type,list[i].photograph_group=list[i].photograph_group}this.loaded=!0,this.getDone(!0,list,1)},getListData:function(page){var self=this,uid=this.appUtil.getUid();""!=uid&&this.$ajax({data:{api:"task_post_list",uid:uid},errorMsg:"任务列表加载失败"},function(data){for(var tmplist=data||[],list=new Array,i=0;i<tmplist.length;i++)tmplist[i].status==self.status&&list.push(tmplist[i]);self.dataHandler(list)},function(err){self.getDone(!1)})}},components:{ContentWrap:__WEBPACK_IMPORTED_MODULE_1__TaskWrap___default.a}}},203:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__(64),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1__MultiPreview__=__webpack_require__(45),__WEBPACK_IMPORTED_MODULE_1__MultiPreview___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__MultiPreview__),__WEBPACK_IMPORTED_MODULE_2__plugins_imguploader__=__webpack_require__(31);__webpack_exports__.default={props:["data"],data:function(){return{currentItem:{},ableCount:0}},methods:{taskToggle:function(task){task.opened=!task.opened},radioClick:function(index,value){this.data.list[index].filled||(this.data.list[index].result_value=value)},select:function(item){this.currentItem=item},done:function(){var self=this;this.$f7.modal({title:"确定提交任务吗？",text:"请认真检查任务填写结果，已填写的任务提交后将无法修改。",buttons:[{text:"提交",bold:!0,onClick:function(){for(var uploader=new __WEBPACK_IMPORTED_MODULE_2__plugins_imguploader__.a,doneCount=0,i=0;i<self.data.list.length;i++)self.data.list[i].filled||function(dataItem){uploader.upload(dataItem.photo_list,function(urlsText){dataItem.result_photos=urlsText,(doneCount+=1)>=self.data.list.length&&self.post()})}(self.data.list[i])}},{text:"取消"}]})},post:function(){for(var postlist=new Array,i=0;i<this.data.list.length;i++){var flag=!0;this.data.list[i].filled||($.stringEmpty(this.data.list[i].conetnt_type)||$.stringEmpty(this.data.list[i].result_value)&&(flag=!1),$.stringEmpty(this.data.list[i].photograph_group)||$.stringEmpty(this.data.list[i].result_photos)&&(flag=!1),flag&&postlist.push({content_id:this.data.list[i].content_id,user_id:1,result_value:this.data.list[i].result_value,result_photos:this.data.list[i].result_photos}))}if(postlist.length<=0)return void this.$f7.modal({title:"没有要提交的任务哦:(",buttons:[{text:"做任务"}]});var self=this;this.appUtil.loginedInfo(function(_ref){var uid=_ref.uid;self.$ajax({data:{api:"task_post_commit",site_list:__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(postlist),uid:uid},errorMsg:"抱歉，任务提交失败了:("},function(data){self.$f7.modal({title:"任务提交成功了:)",buttons:[{text:"好",onClick:function(){window.location.reload()}}]})})})}},components:{MultiPreview:__WEBPACK_IMPORTED_MODULE_1__MultiPreview___default.a}}},21:function(module,exports,__webpack_require__){__webpack_require__(24);var $Object=__webpack_require__(8).Object;module.exports=function(it,key,desc){return $Object.defineProperty(it,key,desc)}},210:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__component_TaskContainer__=__webpack_require__(132),__WEBPACK_IMPORTED_MODULE_0__component_TaskContainer___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__component_TaskContainer__),__WEBPACK_IMPORTED_MODULE_1__component_Subnavbar__=__webpack_require__(16),__WEBPACK_IMPORTED_MODULE_1__component_Subnavbar___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__component_Subnavbar__),__WEBPACK_IMPORTED_MODULE_2_swiper__=__webpack_require__(32),__WEBPACK_IMPORTED_MODULE_2_swiper___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_swiper__),__WEBPACK_IMPORTED_MODULE_3__core_vbus__=__webpack_require__(1);__webpack_exports__.default={data:function(){return{subnavbarItems:[{cname:"待办任务",status:0},{cname:"已办任务",status:1}],tabIndex:0,swiper:null}},created:function(){__WEBPACK_IMPORTED_MODULE_3__core_vbus__.a.$on(__WEBPACK_IMPORTED_MODULE_3__core_vbus__.b.SUBNAV_ITEM_TAP,this.tabChange)},mounted:function(){if(null==this.swiper){var self=this;$(this.$refs.swiper);this.swiper=new __WEBPACK_IMPORTED_MODULE_2_swiper___default.a(".swiper-container",{on:{slideChangeTransitionEnd:function(){self.tabChange(this.snapIndex)}}})}},methods:{tabChange:function(index){this.tabIndex=index,this.swiper.slideTo(index,0)},done:function(){this.$refs.taskWrap[0].$refs.contentWrap.done()}},components:{Subnavbar:__WEBPACK_IMPORTED_MODULE_1__component_Subnavbar___default.a,TaskContainer:__WEBPACK_IMPORTED_MODULE_0__component_TaskContainer___default.a}}},218:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__main_js__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_1__pages_Task__=__webpack_require__(95),__WEBPACK_IMPORTED_MODULE_1__pages_Task___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__pages_Task__);__WEBPACK_IMPORTED_MODULE_0__main_js__.a(__WEBPACK_IMPORTED_MODULE_1__pages_Task___default.a)},24:function(module,exports,__webpack_require__){var $export=__webpack_require__(22);$export($export.S+$export.F*!__webpack_require__(4),"Object",{defineProperty:__webpack_require__(5).f})},25:function(module,exports,__webpack_require__){module.exports={default:__webpack_require__(21),__esModule:!0}},26:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}},27:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _defineProperty=__webpack_require__(25),_defineProperty2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_defineProperty);exports.default=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),(0,_defineProperty2.default)(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}()},29:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__core_vbus__=__webpack_require__(1);__webpack_exports__.default={props:["list","activeIndex","more","mescrollArr","firstDefault","widthAve"],data:function(){return{firstDef:null==this.firstDefault||this.firstDefault,wAve:1==this.widthAve,itemStyle:null}},created:function(){if(this.wAve){var len=this.list.length+(this.firstDef?1:0);this.itemStyle={width:document.body.clientWidth/len+"px"}}},updated:function(){var mescrollArr=this.mescrollArr;if(mescrollArr&&mescrollArr[this.activeIndex]){var curNavDom=this.$refs.activeDom[0]?this.$refs.activeDom[0]:this.$refs.activeDom,scrollxContent=this.$refs.scrollContent,star=scrollxContent.scrollLeft,end=curNavDom.offsetLeft+curNavDom.clientWidth/2-document.body.clientWidth/2;mescrollArr[this.activeIndex].getStep(star,end,function(step,timer){scrollxContent.scrollLeft=step}),mescrollArr[this.activeIndex].hideTopBtn();var curMescroll=this.mescrollArr[this.activeIndex];curMescroll.getScrollTop()>=curMescroll.optUp.toTop.offset?curMescroll.showTopBtn():curMescroll.hideTopBtn()}},methods:{navClick:function(index){__WEBPACK_IMPORTED_MODULE_0__core_vbus__.a.$emit(__WEBPACK_IMPORTED_MODULE_0__core_vbus__.b.SUBNAV_ITEM_TAP,index)}}}},30:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),__webpack_exports__.default={props:["uniqueKey","initload","mescrollArr","noDataTip","refreshBtnLabel","downlock","uplock"],data:function(){return{data:{list:[]},pageSize:10,mescroll:null,ids:{mescroll:"mescroll"+this.uniqueKey,emptyWrap:"empty-wrap"+this.uniqueKey}}},watch:{initload:function(curVal,oldVal){1!=curVal||this.loaded||this.init()}},mounted:function(){this.init()},methods:{init:function(){1==this.initload&&null==this.mescroll&&(this.mescroll=new MeScroll(this.ids.mescroll,{down:{isLock:this.downlock},up:{isLock:this.uplock,callback:this.upCallback,isBounce:!1,empty:{icon:__webpack_require__(14),tip:this.noDataTip||"暂无相关数据~",btntext:this.refreshBtnLabel||"",btnClick:this.refreshBtnLabel?this.getListData:null},clearEmptyId:this.ids.emptyWrap}}),this.mescrollArr&&this.mescrollArr.push(this.mescroll))},upCallback:function(page){this.getListData(page)},getDone:function(isSucc,list,pageIndex){isSucc?(this.mescroll.endSuccess(list.length,list.length>=this.pageSize),pageIndex>1?this.$set(this.data,"list",this.data.list.concat(list)):this.$set(this.data,"list",list)):this.mescroll.endErr()}},components:{ContentWrap:{}}}},31:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__=__webpack_require__(26),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__=__webpack_require__(27),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__),__WEBPACK_IMPORTED_MODULE_2__core_http__=__webpack_require__(39),EnclosureUploader=function(){function EnclosureUploader(){__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this,EnclosureUploader),this.resultSet=new Array,this.poster=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__core_http__.b)()}return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(EnclosureUploader,[{key:"upload",value:function(files,callback){if(files.length<=0)callback();else{var _this=this;if((files=this.filter(files))&&files.length>0)for(var i=0;i<files.length;i++)_this.poster({data:{filetype:"image",name:"111.jpg",data:files[i]},method:"post"}).then(function(res){_this.resultSet.push(res.data),_this.resultSet.length==files.length&&callback(_this.urlsText())});else callback(null)}}},{key:"urlsText",value:function(){for(var url="",i=0;i<this.resultSet.length;i++)0!=i&&(url+=";"),url+=this.resultSet[i];return url}},{key:"filter",value:function(files){for(var newFiles=new Array,i=0;i<files.length;i++)files[i]&&""!=files[i]&&newFiles.push(files[i]);return newFiles}}]),EnclosureUploader}();__webpack_exports__.a=EnclosureUploader},45:function(module,exports,__webpack_require__){var Component=__webpack_require__(0)(__webpack_require__(66),__webpack_require__(49),null,null);module.exports=Component.exports},49:function(module,exports){module.exports={render:function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"multi-preview"},[_c("canvas",{ref:"cvs",staticStyle:{display:"none"}}),_vm._v(" "),_c("div",{staticClass:"multi-content",style:{width:95*(_vm.multis.length+1)+10+"px"}},[_vm._l(_vm.urls,function(item,$index){return _vm.readonly?_c("div",{staticClass:"item"},[_c("span",{staticClass:"item-span",style:{backgroundImage:"url("+item+")"},on:{click:function($event){_vm.preview($index)}}})]):_vm._e()}),_vm._v(" "),_vm._l(_vm.multis,function(item,index){return _vm.readonly?_vm._e():_c("div",{staticClass:"item"},[_c("span",{staticClass:"item-span",style:{"background-image":item}}),_vm._v(" "),_c("a",{staticClass:"item-close",on:{click:function($event){_vm.removeMulti(index)}}},[_c("span",{staticClass:"btn-close"})])])}),_vm._v(" "),_vm.readonly?_vm._e():_c("div",{staticClass:"item add"},[_c("input",{ref:"uploadInput2",staticClass:"upload-input",attrs:{type:"file",name:""},on:{change:_vm.uploadChange}})])],2)])},staticRenderFns:[]}},66:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),__webpack_exports__.default={props:["data","urls","readonly","inputDom"],data:function(){return{maxSize:960,multis:[]}},created:function(){this.readonly&&(this.multis=this.urls||[])},watch:{inputDom:function(newVal,oldVal){this.uploadChange(newVal)}},methods:{uploadChange:function(e){var file,_this=this,loader=e.target;(file=loader.files[0])&&_this.compress(file),$(loader).val("")},compress:function(file){var _this=this,image=new Image,scale=1;image.src=URL.createObjectURL(file),image.onload=function(){var cvs=_this.$refs.cvs;(this.width>_this.maxSize||this.height>_this.maxSize)&&(scale=this.width>this.height?_this.maxSize/this.width:_this.maxSize/this.height),cvs.width=this.width*scale,cvs.height=this.height*scale,cvs.getContext("2d").drawImage(this,0,0,cvs.width,cvs.height);var newImageData=cvs.toDataURL("image/jpeg",.7);_this.selectedMulti(newImageData.replace("data:base64","data:image/jpeg;base64")),_this.data.push(newImageData.replace("data:image/jpeg;base64,",""))}},selectedMulti:function(base64Data){this.multis.push('url("'+base64Data+'")')},removeMulti:function(i){this.multis.splice(i,1),this.data.splice(i,1)},preview:function(index){this.$f7.photoBrowser({photos:this.urls,initialSlide:index,theme:"dark",backLinkText:"关闭"}).open()}}}},95:function(module,exports,__webpack_require__){var Component=__webpack_require__(0)(__webpack_require__(210),__webpack_require__(149),null,null);module.exports=Component.exports}},[218]);